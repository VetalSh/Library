<!DOCTYPE HTML>
<html lang="ru">
<head>
<!-- Generated by javadoc (17) on Thu Nov 14 16:33:27 EET 2024 -->
<title>BookingLogic</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2024-11-14">
<meta name="description" content="declaration: package: library.model.command, class: BookingLogic">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">library.model.command</a></div>
<h1 title="Class BookingLogic" class="title">Class BookingLogic</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">library.model.command.BookingLogic</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">BookingLogic</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">Class-util, has only static methods by design. All methods must be related to Booking entity, like find booking, etc.
 All public methods here must comply with <a href="Command.html" title="interface in library.model.command"><code>Command</code></a> signature, as
 they will be used in CommandContext as lambda-functions and called from Front Controller
 <a href="../../controller/FrontController.html" title="class in library.controller"><code>FrontController</code></a>

 Behaviour depends upon authorized user.
 USER role can:
 <ul>
 <li> add book to a NEW booking
 <li> delete book from NEW booking
 <li> book NEW booking
 <li> cancel NEW/BOOKED booking
 <li> see all their booking in any state
 <li> see books in specific booking
 <li> see books in subscription (means see all books in bookings with state equal to DELIVERED and LOCATION
 equal to USER
 </ul>
 All new booking are saved to session. User can have only one new booking. (//TODO save new booking to DB also)
 Look up for new booking should be in such order:
 <ul>
      <li> in session? if no:
      <li> in db? if no:
      <li> if needed, create new booking
 </ul>


 LIBRARIAN role can:
 <ul>
      <li> deliver BOOKED booking
      <li> done DELIVERED booking
      <li> cancel BOOKED booking
      <li> search for booking by user email or name, by booking state
  </ul>
  For all operation, except search, LIBRARIAN needs bookingID for proceed</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#addBook(javax.servlet.http.HttpServletRequest)" class="member-name-link">addBook</a><wbr>(javax.servlet.http.HttpServletRequest&nbsp;req)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Add book to new booking, if last doesn't exists, it'll create a new one.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#basket(javax.servlet.http.HttpServletRequest)" class="member-name-link">basket</a><wbr>(javax.servlet.http.HttpServletRequest&nbsp;req)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Finds current booking for a user and also all previous bookings.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#book(javax.servlet.http.HttpServletRequest)" class="member-name-link">book</a><wbr>(javax.servlet.http.HttpServletRequest&nbsp;req)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Books booking.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#cancel(javax.servlet.http.HttpServletRequest)" class="member-name-link">cancel</a><wbr>(javax.servlet.http.HttpServletRequest&nbsp;req)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Cancel booking.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#deliver(javax.servlet.http.HttpServletRequest)" class="member-name-link">deliver</a><wbr>(javax.servlet.http.HttpServletRequest&nbsp;req)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Delivers booking.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#done(javax.servlet.http.HttpServletRequest)" class="member-name-link">done</a><wbr>(javax.servlet.http.HttpServletRequest&nbsp;req)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Finishes booking.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#find(javax.servlet.http.HttpServletRequest)" class="member-name-link">find</a><wbr>(javax.servlet.http.HttpServletRequest&nbsp;req)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Finds all booking according to pattern with pagination and saves this list to session for further showing to a
 user</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#listBookInSubscription(javax.servlet.http.HttpServletRequest)" class="member-name-link">listBookInSubscription</a><wbr>(javax.servlet.http.HttpServletRequest&nbsp;req)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Finds all booking in state DELIVERED and saves this list to session for further showing to a user</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#removeBook(javax.servlet.http.HttpServletRequest)" class="member-name-link">removeBook</a><wbr>(javax.servlet.http.HttpServletRequest&nbsp;req)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Removes book from a new booking.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="listBookInSubscription(javax.servlet.http.HttpServletRequest)">
<h3>listBookInSubscription</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">listBookInSubscription</span><wbr><span class="parameters">(javax.servlet.http.HttpServletRequest&nbsp;req)</span>
                                     throws <span class="exceptions"><a href="../../exceptions/DaoException.html" title="class in library.exceptions">DaoException</a></span></div>
<div class="block">Finds all booking in state DELIVERED and saves this list to session for further showing to a user</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>req</code> - user request</dd>
<dt>Returns:</dt>
<dd>page to be shown to user</dd>
<dt>Throws:</dt>
<dd><code><a href="../../exceptions/DaoException.html" title="class in library.exceptions">DaoException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="find(javax.servlet.http.HttpServletRequest)">
<h3>find</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">find</span><wbr><span class="parameters">(javax.servlet.http.HttpServletRequest&nbsp;req)</span>
                   throws <span class="exceptions"><a href="../../exceptions/ServiceException.html" title="class in library.exceptions">ServiceException</a></span></div>
<div class="block">Finds all booking according to pattern with pagination and saves this list to session for further showing to a
 user</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>req</code> - user request</dd>
<dt>Returns:</dt>
<dd>page to be shown to user</dd>
<dt>Throws:</dt>
<dd><code><a href="../../exceptions/ServiceException.html" title="class in library.exceptions">ServiceException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="basket(javax.servlet.http.HttpServletRequest)">
<h3>basket</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">basket</span><wbr><span class="parameters">(javax.servlet.http.HttpServletRequest&nbsp;req)</span>
                     throws <span class="exceptions"><a href="../../exceptions/ServiceException.html" title="class in library.exceptions">ServiceException</a>,
<a href="../../exceptions/DaoException.html" title="class in library.exceptions">DaoException</a>,
<a href="../../exceptions/AjaxException.html" title="class in library.exceptions">AjaxException</a></span></div>
<div class="block">Finds current booking for a user and also all previous bookings. Saves all this to session</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>req</code> - user request</dd>
<dt>Returns:</dt>
<dd>page to be shown to user</dd>
<dt>Throws:</dt>
<dd><code><a href="../../exceptions/AjaxException.html" title="class in library.exceptions">AjaxException</a></code> - is not thrown from this function</dd>
<dd><code><a href="../../exceptions/ServiceException.html" title="class in library.exceptions">ServiceException</a></code></dd>
<dd><code><a href="../../exceptions/DaoException.html" title="class in library.exceptions">DaoException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="addBook(javax.servlet.http.HttpServletRequest)">
<h3>addBook</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">addBook</span><wbr><span class="parameters">(javax.servlet.http.HttpServletRequest&nbsp;req)</span>
                      throws <span class="exceptions"><a href="../../exceptions/ServiceException.html" title="class in library.exceptions">ServiceException</a>,
<a href="../../exceptions/DaoException.html" title="class in library.exceptions">DaoException</a>,
<a href="../../exceptions/AjaxException.html" title="class in library.exceptions">AjaxException</a></span></div>
<div class="block">Add book to new booking, if last doesn't exists, it'll create a new one. Booking will be saved to session
 It supposes to work only with AJAX, so as result Ajax exception will be thrown to force Front Controller
 treat this request as POST</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>req</code> - user request</dd>
<dt>Returns:</dt>
<dd>this never will be returned</dd>
<dt>Throws:</dt>
<dd><code><a href="../../exceptions/AjaxException.html" title="class in library.exceptions">AjaxException</a></code> - on state of which will be decided that to show to user</dd>
<dd><code><a href="../../exceptions/ServiceException.html" title="class in library.exceptions">ServiceException</a></code></dd>
<dd><code><a href="../../exceptions/DaoException.html" title="class in library.exceptions">DaoException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="removeBook(javax.servlet.http.HttpServletRequest)">
<h3>removeBook</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">removeBook</span><wbr><span class="parameters">(javax.servlet.http.HttpServletRequest&nbsp;req)</span>
                         throws <span class="exceptions"><a href="../../exceptions/ServiceException.html" title="class in library.exceptions">ServiceException</a>,
<a href="../../exceptions/DaoException.html" title="class in library.exceptions">DaoException</a>,
<a href="../../exceptions/AjaxException.html" title="class in library.exceptions">AjaxException</a></span></div>
<div class="block">Removes book from a new booking. Supposes to work only as AJAX request, so it'll throw exception anyway</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="../../exceptions/AjaxException.html" title="class in library.exceptions">AjaxException</a></code> - on state of which will be decided that to show to user</dd>
<dd><code><a href="../../exceptions/ServiceException.html" title="class in library.exceptions">ServiceException</a></code></dd>
<dd><code><a href="../../exceptions/DaoException.html" title="class in library.exceptions">DaoException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="cancel(javax.servlet.http.HttpServletRequest)">
<h3>cancel</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">cancel</span><wbr><span class="parameters">(javax.servlet.http.HttpServletRequest&nbsp;req)</span>
                     throws <span class="exceptions"><a href="../../exceptions/ServiceException.html" title="class in library.exceptions">ServiceException</a>,
<a href="../../exceptions/DaoException.html" title="class in library.exceptions">DaoException</a>,
<a href="../../exceptions/AjaxException.html" title="class in library.exceptions">AjaxException</a></span></div>
<div class="block">Cancel booking. Only NEW and BOOKED bookings can be canceled. Supposes to work only with AJAX requests, so
 exception will be thrown anyway.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="../../exceptions/AjaxException.html" title="class in library.exceptions">AjaxException</a></code> - on state of this will be decided that to show to user</dd>
<dd><code><a href="../../exceptions/ServiceException.html" title="class in library.exceptions">ServiceException</a></code></dd>
<dd><code><a href="../../exceptions/DaoException.html" title="class in library.exceptions">DaoException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="book(javax.servlet.http.HttpServletRequest)">
<h3>book</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">book</span><wbr><span class="parameters">(javax.servlet.http.HttpServletRequest&nbsp;req)</span>
                   throws <span class="exceptions"><a href="../../exceptions/ServiceException.html" title="class in library.exceptions">ServiceException</a>,
<a href="../../exceptions/DaoException.html" title="class in library.exceptions">DaoException</a>,
<a href="../../exceptions/AjaxException.html" title="class in library.exceptions">AjaxException</a></span></div>
<div class="block">Books booking. Only NEW bookings can be booked. Normal request, so AjaxException will not be thrown here.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="../../exceptions/ServiceException.html" title="class in library.exceptions">ServiceException</a></code></dd>
<dd><code><a href="../../exceptions/DaoException.html" title="class in library.exceptions">DaoException</a></code></dd>
<dd><code><a href="../../exceptions/AjaxException.html" title="class in library.exceptions">AjaxException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="deliver(javax.servlet.http.HttpServletRequest)">
<h3>deliver</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">deliver</span><wbr><span class="parameters">(javax.servlet.http.HttpServletRequest&nbsp;req)</span>
                      throws <span class="exceptions"><a href="../../exceptions/ServiceException.html" title="class in library.exceptions">ServiceException</a>,
<a href="../../exceptions/DaoException.html" title="class in library.exceptions">DaoException</a>,
<a href="../../exceptions/AjaxException.html" title="class in library.exceptions">AjaxException</a></span></div>
<div class="block">Delivers booking. Can deliver to USER or to LIBRARY, the last means reading room.
 Changes book stats for all books in booking:
  <ul>
      <li> in-house decreased by 1
      <li> reserved increased by 1
  </ul></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>req</code> - HttpServletRequest</dd>
<dt>Returns:</dt>
<dd>page to be shown to user</dd>
<dt>Throws:</dt>
<dd><code><a href="../../exceptions/AjaxException.html" title="class in library.exceptions">AjaxException</a></code> - won't be thrown here</dd>
<dd><code><a href="../../exceptions/ServiceException.html" title="class in library.exceptions">ServiceException</a></code></dd>
<dd><code><a href="../../exceptions/DaoException.html" title="class in library.exceptions">DaoException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="done(javax.servlet.http.HttpServletRequest)">
<h3>done</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">done</span><wbr><span class="parameters">(javax.servlet.http.HttpServletRequest&nbsp;req)</span>
                   throws <span class="exceptions"><a href="../../exceptions/ServiceException.html" title="class in library.exceptions">ServiceException</a>,
<a href="../../exceptions/DaoException.html" title="class in library.exceptions">DaoException</a>,
<a href="../../exceptions/AjaxException.html" title="class in library.exceptions">AjaxException</a></span></div>
<div class="block">Finishes booking. All books from it are returned to library.
 It's final state of booking.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>req</code> - user request</dd>
<dt>Returns:</dt>
<dd>page to be shown to user</dd>
<dt>Throws:</dt>
<dd><code><a href="../../exceptions/AjaxException.html" title="class in library.exceptions">AjaxException</a></code> - won't be thrown here</dd>
<dd><code><a href="../../exceptions/ServiceException.html" title="class in library.exceptions">ServiceException</a></code></dd>
<dd><code><a href="../../exceptions/DaoException.html" title="class in library.exceptions">DaoException</a></code></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
